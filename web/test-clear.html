<!DOCTYPE html>
<html>

<head>
    <title>Test Clear Data</title>
</head>

<body>
    <h1>Test Clear Data API</h1>
    <button id="clearBtn" style="padding: 10px 20px; background: red; color: white; border: none; cursor: pointer;">
        Clear All Data
    </button>
    <div id="result" style="margin-top: 20px; padding: 10px; background: #f0f0f0;"></div>

    <script>
        document.getElementById('clearBtn').addEventListener('click', function () {
            console.log('Button clicked');

            if (!confirm('Are you sure you want to clear all data?')) {
                return;
            }

            const resultDiv = document.getElementById('result');
            resultDiv.textContent = 'Clearing...';

            fetch('api/clear-data.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
                .then(response => {
                    console.log('Response status:', response.status);
                    return response.json();
                })
                .then(data => {
                    console.log('Response data:', data);
                    resultDiv.textContent = JSON.stringify(data, null, 2);

                    if (data.success) {
                        alert('Success! Deleted ' + data.filesDeleted + ' files');
                    } else {
                        alert('Error: ' + data.error);
                    }
                })
                .catch(err => {
                    console.error('Error:', err);
                    resultDiv.textContent = 'Error: ' + err.message;
                    alert('Error: ' + err.message);
                });
        });
    </script>
</body>

</html>